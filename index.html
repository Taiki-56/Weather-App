<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather App</title>
    <link rel="icon" type="image/x-icon" href="./images/clear.jpg" />
    <link rel="stylesheet" href="./index.css" />
    <script
      src="https://kit.fontawesome.com/bdd3e54af0.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body
    id="body"
    class="bg-[url('/./images/clear3.png')] bg-cover bg-center h-screen w-screen"
  >
    <section
      class="flex justify-between items-center lg:p-5 lg:w-screen px-3 h-[7.5%] lg:h-[10%]"
    >
      <form id="fav-cities-form" method="post" class="w-fit">
        <label for="fav-cities">Favorite city:</label>
        <select
          name="city"
          id="fav-cities"
          class="border border-black pl-2 w-[121px] bg-gray-200"
        ></select>
      </form>
      <form id="search-form" method="post">
        <input
          id="search-input"
          type="text"
          placeholder="search for city"
          class="border border-black pl-2 w-[121px] bg-gray-200"
        />
      </form>
    </section>
    <section
      class="flex flex-col items-center px-5 w-full m-auto h-[16%] lg:h-[29%]"
    >
      <h3 class="lg:w-80 w-[280px]">Current Weather</h3>
      <div
        class="border border-black flex flex-col items-center rounded-md bg-gray-200 bg-opacity-30 w-64 lg:w-80"
      >
        <div class="flex lg:w-80 justify-between">
          <div class="w-[68px]"></div>
          <div class="flex items-center">
            <h4
              id="city-name"
              class="inline-block w-auto max-w-max p-1 lg:p-2.5"
            ></h4>
          </div>
          <div class="flex pr-7">
            <button id="fav-button" class="ml-5">
              <i class="fa-regular fa-star text-yellow-300"></i>
            </button>
          </div>
        </div>
        <p id="current-temp" class="inline-block w-auto max-w-max"></p>
        <img
          id="current-img"
          src="./images/clear.png"
          alt="weather info"
          class="lg:w-32 h-auto p-1 lg:p-2.5 size-12 lg:size-[80px,80px]"
        />
      </div>
    </section>
    <section
      class="px-5 lg:p-5 w-full h-[21.5%] lg:h-[31.5%] mt-[12px] lg:mt-0"
    >
      <h3>5-Day Weather Forecast</h3>
      <div class="w-full flex lg:p-5">
        <div class="w-full flex justify-between">
          <div
            id="day-1-dev"
            class="border border-black m-1 p-1 lg:m-5 lg:p-2 flex flex-col items-center w-56 bg-gray-200 bg-opacity-30 rounded-md"
          >
            <p id="day-1-date" class="text-center">Day 1</p>
            <img
              id="day-1-img"
              src="./images/clear.png"
              alt="Day 1"
              class="w-20 h-auto"
            />
            <p id="day-1-temp">#°C</p>
          </div>
          <div
            id="day-2-dev"
            class="border border-black m-1 p-1 lg:m-5 lg:p-2 flex flex-col items-center w-56 bg-gray-200 bg-opacity-30 rounded-md"
          >
            <p id="day-2-date" class="text-center">Day 2</p>
            <img
              id="day-2-img"
              src="./images/clear.png"
              alt="Day 2"
              class="w-20 h-auto"
            />
            <p id="day-2-temp">#°C</p>
          </div>
          <div
            id="day-3-dev"
            class="border border-black m-1 p-1 lg:m-5 lg:p-2 flex flex-col items-center w-56 bg-gray-200 bg-opacity-30 rounded-md"
          >
            <p id="day-3-date" class="text-center">Day 3</p>
            <img
              id="day-3-img"
              src="./images/clear.png"
              alt="Day 3"
              class="w-20 h-auto"
            />
            <p id="day-3-temp">#°C</p>
          </div>
          <div
            id="day-4-dev"
            class="border border-black m-1 p-1 lg:m-5 lg:p-2 flex flex-col items-center w-56 bg-gray-200 bg-opacity-30 rounded-md"
          >
            <p id="day-4-date" class="text-center">Day 4</p>
            <img
              id="day-4-img"
              src="./images/clear.png"
              alt="Day 4"
              class="w-20 h-auto"
            />
            <p id="day-4-temp">#°C</p>
          </div>
          <div
            id="day-5-dev"
            class="border border-black m-1 p-1 lg:m-5 lg:p-2 flex flex-col items-center w-56 bg-gray-200 bg-opacity-30 rounded-md"
          >
            <p id="day-5-date" class="text-center">Day 5</p>
            <img
              id="day-5-img"
              src="./images/clear.png"
              alt="Day 5"
              class="w-20 h-auto"
            />
            <p id="day-5-temp">#°C</p>
          </div>
        </div>
      </div>
    </section>
    <section
      class="px-5 w-[85%] m-auto lg:w-screen h-[56%] lg:h-[29.5%] lg:pt-0"
    >
      <h3>Hourly Weather</h3>
      <div class="m-auto flex flex-col lg:flex-row justify-between lg:p-5">
        <div
          class="p-0.5 border border-black flex lg:flex-col m-[7px] lg:p-2 justify-evenly items-center lg:w-36 bg-gray-200 bg-opacity-30 rounded-md"
        >
          <p>2 am</p>
          <img id="2-img" class="size-8" src="./images/clear.png" alt="0-3" />
          <p id="2-temp">#°C</p>
          <p id="2-hum">#%</p>
        </div>
        <div
          class="p-0.5 border border-black flex lg:flex-col m-[7px] lg:p-2 justify-evenly justify-evenly items-center lg:w-36 bg-gray-200 bg-opacity-30 rounded-md"
        >
          <p>5 am</p>
          <img id="5-img" class="size-8" src="./images/clear.png" alt="0-3" />
          <p id="5-temp">#°C</p>
          <p id="5-hum">#%</p>
        </div>
        <div
          class="p-0.5 border border-black flex lg:flex-col m-[7px] lg:p-2 justify-evenly items-center lg:w-36 bg-gray-200 bg-opacity-30 rounded-md"
        >
          <p>8 am</p>
          <img id="8-img" class="size-8" src="./images/clear.png" alt="0-3" />
          <p id="8-temp">#°C</p>
          <p id="8-hum">#%</p>
        </div>
        <div
          class="p-0.5 border border-black flex lg:flex-col m-[7px] lg:p-2 justify-evenly items-center lg:w-36 bg-gray-200 bg-opacity-30 rounded-md"
        >
          <p>11 am</p>
          <img id="11-img" class="size-8" src="./images/clear.png" alt="0-3" />
          <p id="11-temp">#°C</p>
          <p id="11-hum">#%</p>
        </div>
        <div
          class="p-0.5 border border-black flex lg:flex-col m-[7px] lg:p-2 justify-evenly items-center lg:w-36 bg-gray-200 bg-opacity-30 rounded-md"
        >
          <p>2 pm</p>
          <img id="14-img" class="size-8" src="./images/clear.png" alt="0-3" />
          <p id="14-temp">#°C</p>
          <p id="14-hum">#%</p>
        </div>
        <div
          class="p-0.5 border border-black flex lg:flex-col m-[7px] lg:p-2 justify-evenly items-center lg:w-36 bg-gray-200 bg-opacity-30 rounded-md"
        >
          <p>5 pm</p>
          <img id="17-img" class="size-8" src="./images/clear.png" alt="0-3" />
          <p id="17-temp">#°C</p>
          <p id="17-hum">#%</p>
        </div>
        <div
          class="p-0.5 border border-black flex lg:flex-col m-[7px] lg:p-2 justify-evenly items-center lg:w-36 bg-gray-200 bg-opacity-30 rounded-md"
        >
          <p>8 pm</p>
          <img id="20-img" class="size-8" src="./images/clear.png" alt="0-3" />
          <p id="20-temp">#°C</p>
          <p id="20-hum">#%</p>
        </div>
        <div
          class="p-0.5 border border-black flex lg:flex-col m-[7px] lg:p-2 justify-evenly items-center lg:w-36 bg-gray-200 bg-opacity-30 rounded-md"
        >
          <p>11 pm</p>
          <img id="23-img" class="size-8" src="./images/clear.png" alt="0-3" />
          <p id="23-temp">#°C</p>
          <p id="23-hum">#%</p>
        </div>
      </div>
    </section>
    <script src="./scripts/index.js" type="module"></script>
    <script>
      /* city auto complete */
      window.initMap = () => {
        const searchInput = document.getElementById("search-input");
        // search only cities
        const options = {
          types: ["(cities)"],
        };

        const autoComplete = new google.maps.places.Autocomplete(
          searchInput,
          options
        );

        autoComplete.addListener("place_changed", () => {
          const place = autoComplete.getPlace();
          if (place.address_components) {
            // get city name
            const city = place.address_components.find((component) =>
              component.types.includes("locality")
            );
            if (city) {
              let selectedCity = city.long_name;
              localStorage.setItem("selectedCity", selectedCity);
              localStorage.removeItem("selectIndexNum");

              window.location.reload();
            } else {
              console.log("City not found in place details");
            }
          } else {
            console.log("Place details not found");
          }
        });
      };
    </script>
    <script
      async
      defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4ZEyVWjmdiIPUoF87sRLTOqT6_jrrxes&libraries=places&callback=initMap"
    ></script>
  </body>
</html>
